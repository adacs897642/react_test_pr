import React, {Component} from 'react'
import {connect} from 'react-redux'
import {fetchNews} from 'actions/news'


class News extends Component {

    componentDidMount(){
       this.props.fetchNews()

    }

    componentWill
    templateRender = (news)=>{
        return(
            <div>
                {news.map((note, index) => (
                    <div className="Article" key={index}>
                        <div className="Title">
                            <h2>{note.title}</h2>
                        </div>
                        <div className="Text">
                            {note.text}
                        </div>
                        <hr/>
                    </div>
                ))}
            </div>

        )
    }

    renderNews =()=>{
        const { status, data } = this.props.news
        let template
        if(status) {
            template = <div>{this.templateRender(data)}
                <hr/> всего новостей: {data.length}</div>
        }
        else template = <div>Идет загрузка...</div>
        return template
    }

    render(){
        return(
            <div>
                <div>
                    {this.renderNews()}
                </div>
            </div>

        )
    }
}


const mapStateToProps = (state) => {

    return {
        news: state.news
    }
}

const mapDispathToProps={
    fetchNews,
}



export default connect(mapStateToProps, mapDispathToProps)(News)
